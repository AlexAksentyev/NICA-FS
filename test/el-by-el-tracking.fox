INCLUDE 'bin/setups/BENDS24SEQ_CLEAN';


PROCEDURE INJECT;
  CR;
  SR 1E-3 0 0 0 0 0 0 0 1; SSR 0 0 1;
  SR 0 0 1E-3 0 0 0 0 0 1; SSR 0 0 1;
  SR .5E-3 0 0 0 0 0 0 0 1; SSR 0 0 1;
  SR 0 0 .5E-3 0 0 0 0 0 1; SSR 0 0 1;
ENDPROCEDURE;


PROCEDURE RUN;
  VARIABLE WHERE 100;
  VARIABLE QF  1; VARIABLE QD  1;
  VARIABLE HZ1 1; VARIABLE HZ2 1;
  VARIABLE KZ1 1; VARIABLE KZ2 1;
  VARIABLE MAPPARAMS 1 6; {HOLDS THE ABOVE VALUES}
  VARIABLE MAPARR 1000 6 471; VARIABLE SPNRARR 1000 3 3 471;

  DIRSET WHERE 'data/EL-BY-EL-TRACKING/' TRUE;
  GROUTF 'img/dump/TR' 1;
  
  OV 3 3 0;
  SET_FOR_PROTONS HZ1 HZ2 QF QD;

  MAPPARAMS(1) := HZ1; MAPPARAMS(2) := HZ2;
  MAPPARAMS(3) := KZ1; MAPPARAMS(4) := KZ2;
  MAPPARAMS(5) := QF;  MAPPARAMS(6) := QD;

  LATTICE MAPARR SPNRARR;

  INJECT;

  OPENF 924 WHERE&'TRPRAY.dat' 'REPLACE';
  OPENF 925 WHERE&'TRPSPI.dat' 'REPLACE';
    TREL MAPARR SPNRARR 1 20 1 924 925 -3;
  CLOSEF 924; CLOSEF 925;

ENDPROCEDURE;

RUN; END;
